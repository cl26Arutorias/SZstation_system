# SZstation_system

### 简介

本项目为哈尔滨工业大学(深圳)机器人与智能装备专业 2025 年暑季小学期创新训练课 B 的实践作业。基于QT框架设计跨平台地铁售票系统，实现购票全流程可视化。

### 运行环境

操作系统：Windows 11

操作平台：QT Creator 17.0.0

使用语言：“QT6”+“C++”

### 定义

Mainwindow类：主页面，用作菜单

Welcome类：欢迎界面，附带作者信息

Mapwindow类：地图，用于深圳市地铁信息的查询

Sale类：在线售票窗口，具有选择线路、站点等信息

### 主体设计（流程图）

![图片5](.\images\图片5.png)

### 主要文件说明

* #### Mystation

基于QT6与C++实现的工程包，可用QTcreator打开。

* #### SZstation_system.exe

使用Enigma Virtual Box打包好的exe程序，可以直接执行。

### 主要模块说明	

* 地图查询模块
  * 功能：实现深圳市地铁线路可视化展示
  * 类：Mapwindow
  * 关键技术：基于QT6自带的函数库 <QGraphicsView>、<QGraphicsScene>、<QGraphicsPixmapItem>与<QWheelEvent>实现光标缩放与拖动平移。

* 售票平台模块
  * 功能：完成线路选择、票价计算和支付处理
  * 类：sale
  * 关键技术：
    *  站点名称采用标准化处理，使用邻接表结构(QMap<QString, QSet<QString>>)表示地铁网络，双向连接站点，确保网络连通性，支持312个站点、25条线路的大型网络。
    * BFS算法计算最短路径（最少换乘），每站按1.5公里计算距离，严格遵循深圳地铁阶梯票价规则，时间复杂度O(V+E)，高效处理大型网络。
    * 线路、站点双条件下拉筛选，实时计算并显示票价支付区域，金额输入、找零显示。
    * 线路选择后实时更新对应站点列表，站点选择后实施显示所属线路信息，任何变更后实时实时更新票价，实现动态数据联系。
    * a. 用户操作实时反馈，实现响应式支付处理系统。

* 数据管理模块
  * 功能：管理地铁线路和站点数据

### 运行界面展示

![图片1](.\images\图片4.png)

![图片2](.\images\图片1.png)

![图3](.\images\图片2.png)

![图片4](.\images\图片3.png)



### 调试情况

| 测试用例 | 测试内容       | 预期结果           | 实际结果 | 状态 |
| -------- | -------------- | ------------------ | -------- | ---- |
| 基本功能 | 欢迎界面显示   | 正常显示作者信息   | 符合预期 | ✓    |
|          | 主菜单跳转     | 正常跳转到各功能   | 符合预期 | ✓    |
| 地图功能 | 地图加载       | 完整显示深圳地铁图 | 符合预期 | ✓    |
|          | 缩放功能       | 平滑缩放(0.5x-3x)  | 符合预期 | ✓    |
|          | 平移功能       | 任意方向拖动       | 符合预期 | ✓    |
| 售票功能 | 线路选择       | 25条线路完整显示   | 符合预期 | ✓    |
|          | 站点联动       | 选择线路后更新站点 | 符合预期 | ✓    |
|          | 票价计算(短途) | 罗湖→国贸(2元)     | 2元      | ✓    |
|          | 票价计算(中途) | 机场北→福田(8元)   | 8元      | ✓    |
|          | 票价计算(长途) | 碧头→沙田(12元)    | 12元     | ✓    |
|          | 多人票价       | 2人×5元=10元       | 10元     | ✓    |
|          | 支付不足       | 提示差额金额       | 符合预期 | ✓    |
|          | 支付成功       | 显示找零金额       | 符合预期 | ✓    |
| 性能测试 | 界面响应       | <100ms             | 平均62ms | ✓    |
|          | 路径计算       | <50ms              | 平均28ms | ✓    |
| 兼容性   | Windows 11     | 功能正常           | 符合预期 | ✓    |
|          | Ubuntu 20.04   | 功能正常           | 符合预期 | ✓    |

### 注意事项

* 本项目目前只录入了2024年以前的深圳地铁站点
* 目前本项目不支持从地图直接进入售票界面
* 本项目价格计算公式（每站平均距离1.5公里）
  * 起步价：首4公里2元
  * 4-12公里部分：每增加4公里1元
  * 12-24公里部分：每增加6公里1元
  * 超过24公里部分：每增加8公里1元

### 版权说明

* 选站界面的地图引用自https://railmapgen.github.io/?app=rmp-gallery
* 其余一切代码、图片等均为本人所有，未经允许禁止引用

### 源码链接

https://github.com/cl26Arutorias/SZstation_system
